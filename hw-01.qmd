---
title: "HW 01"
author: "Yashi Mi"
format: 
  html:
    embed-resources: true
execute: 
  warning: false
  message: false
  error: false
toc: true
---

## 0 - Setup

```{r setup}
if (!require("pacman")) 
  install.packages("pacman")

# use this line for installing/loading
pacman::p_load (tidyverse,
              palmerpenguins )

devtools::install_github("tidyverse/dsbox")

library(here)
```

## 1 - Road traffic accidents in Edinburgh

```{r label-me-1}
accidents <- read_csv(here("data","accidents.csv"))
glimpse(accidents)
```

```{r}
accidents <- accidents |>
  mutate(day_type = case_when(
    day_of_week %in% c("Saturday", "Sunday") ~ "Weekend",
    day_of_week %in% c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday") ~ "Weekday",
    TRUE ~ as.character(day_of_week)))
ggplot(accidents, aes(x = time, fill = severity)) +
  geom_density(alpha=0.6) +
  facet_wrap(~day_type, ncol=1) +
  scale_fill_manual("Severity", values = c("#8E6C8A", "#5E9CA0", "#F4E04D")) +
  labs(
    title = "Number of accidents throughout the day",
    subtitle = "By day of week and severity",
    x = "Time of day",
    y = "Density"
  ) +
  theme_minimal(base_size = 14)
```

::: callout-note
The figure illustrates the distribution of road traffic accidents in Edinburgh across different times of day, separated by weekday and weekend, and categorized by severity (Fatal, Serious, Slight).

On weekdays, the number of serious and slight accidents peaks between 16:00 and 18:00, likely corresponding to evening rush hours. Fatal accidents show a smaller peak around midday (12:00).

On weekends, the number of slight accidents also peaks around 16:00, but serious accidents tend to peak slightly later, between 18:00 and 20:00. Notably, there are no fatal accidents reported on weekends in this dataset.
:::

## 2 - NYC marathon winners

```{r label-me-2}
nyc_marathon <- read_csv(here("data","nyc_marathon.csv"))
glimpse(nyc_marathon)
```

```{r}
nyc_marathon_clean <- nyc_marathon |>
  filter(!is.na(time_hrs))

ggplot(nyc_marathon_clean, aes(x = time_hrs))+
  geom_histogram(binwidth = 0.0625)+
   labs(x = "Finishing Time (hours)",
    y = "Count" )+
    theme_minimal(base_size = 14)

ggplot(nyc_marathon_clean, aes(y = time_hrs))+
  geom_boxplot()+
   labs(y = "Finishing Time (hours)" )+
    theme_minimal(base_size = 14)

```

::: callout-note
The histogram shows the overall distribution of finishing times for all marathon runners, making it easier to observe the frequency of different time intervals. In contrast, the box plot summarizes key statistics such as the median, interquartile range, and potential outliers.
:::

```{r}
ggplot(nyc_marathon_clean, aes(x = division,y = time_hrs, fill = division))+
  geom_boxplot()+
  scale_fill_manual(values = c("Blue","Red"))+
   labs(x = "Gender",
     y = "Finishing Time (hours)" )+
    theme_minimal(base_size = 14)
```

::: callout-note
This figure compares the distribution of marathon finishing times between male and female runners. It clearly shows that female runners tend to have longer finishing times than male runners.
:::

```{r}
ggplot(nyc_marathon_clean, aes(x = division,y = time_hrs, fill = division))+
  geom_boxplot(show.legend = FALSE)+
  scale_fill_manual(values = c("Blue","Red"))+
   labs(x = "Gender",
     y = "Finishing Time (hours)" )+
    theme_minimal(base_size = 14)
```

::: callout-note
Since the gender information is already clearly labeled on the x-axis, the color legend becomes redundant. Removing the legend increases the data-to-ink ratio by reducing unnecessary visual elements.
:::

```{r}
ggplot(nyc_marathon_clean, aes(x = year,y = time_hrs, color   = division,shap = division))+
  geom_point(stat = "summary", fun = "mean")+
  scale_color_manual(values = c("Blue","Red")) +
  scale_shape_manual(values = c("5","7")) +
   labs(x = "year",
    y = "Finishing Time (hours)",
    color = "Gender",
    shape = "Gender")+
    theme_minimal(base_size = 14)
```

::: callout-note
The plot shows how marathon finishing times have changed over the past decades. It reveals a notable downward trend in finishing times for both men and women. Additionally, men consistently finished faster than women throughout the recorded years.
:::

## 3 - US counties

::: callout-note
A.

“geom_point(aes(x = median_edu, y = median_hh_income))”

This line creates a scatter plot to show the relationship between median years of education and median household income across U.S. counties.

“geom_boxplot(aes(x = smoking_ban, y = pop2017))”

This line creates a boxplot showing the distribution of 2017 population sizes grouped by smoking ban status.

However, combining these two plots doesn't make sense because they use different x-axes: one is a continuous variable (median_edu) and the other is a categorical variable (smoking_ban).
:::

::: callout-note
B.

The second plot makes it much easier to compare poverty levels across people from different median education levels. This is because all four groups share the same y-axis scale (poverty), which facilitates direct visual comparison.

This suggests that when your goal is to compare values on the y-axis, you should place the faceting variable across columns to keep the y-axis consistent. Conversely, if you are focusing on comparisons along the x-axis, it's better to facet across rows.
:::

## 4 - Rental apartments in SF

## 5 - Napoleon’s march.
